---
title: "PRÁCTICA 1 ESTADÍSTICA DESCRIPTIVA: ANÁLISIS DE ESTADÍSTICAS POKEMON"
author: "GRUPO_6 : *Daniel Mazo*, *Miguel Amado*, *Luis Prieto*, *Alejandro Marín*, *Roberto Rojas*"
date: "Estadística Curso 2024-25"

output: html_document
---

```{r setup, include=FALSE, purl=FALSE}
knitr::opts_chunk$set(echo = FALSE, # Poner a TRUE si se quiere ver el código R.
                      eval = TRUE, 
                      warning = FALSE,
                      message = FALSE,
                      error = TRUE)
```

# Introducción y definición de objetivos

En la actualidad, el equilibrio en los videojuegos resulta un factor esencial para asegurar una experiencia de juego satisfactoria para el mayor arco de jugadores posible. La presencia de desequilibrio en el mundo de juego, ya sea debido a que los personajes tengan ciertas ventajas sobre otros puede causar preferencia de estos personajes o desagrado. Sin embargo, el mundo de Pokémon es ampliamente conocido por buscar un sistema de ventaja-desventaja cuyo equilibrio depende de si mismo.

Por esta razón, en este análisis se tratará la saga de Pokémon, altamente reconocible e influyente en el mundo de los videojuegos de la actualidad, con un alto grado de matemática y estadística en sus mecánicas, consiguiendo que la estrategia y el cálculo mental tengan una gran relevancia, mas allá de ser un juego con una paleta de colores amigable, diseñada para atraer a la audiencia más joven. 

El objetivo principal de este estudio consiste en que, mediante de la comparación entre las estadísticas físicas y de combate de los Pokémon, se buscará identificar patrones que determinen cómo estas características influyen en su efectividad y utilidad en el juego.

De esta manera, realizando diversos análisis univariantes y bivariantes, se podrá alcanzar una conclusion de qué tan equilibrado está en realidad el mundo de Pokémon. 

**NOTA : Algunas estadísticas de esta base de datos no influyen en el objetivo , por lo que no serán tomadas en cuenta para el análisis. (ability1 , ability2 , hidden_ability , dexnum) , estas variables son irrepetibles o informativas**


# Diccionario de datos
Para lograr ese objetivo, hemos recogido una serie de datos de los 1025 pokemon disponibles desde 1995 hasta la fecha, como se muestra a continuación.

* **`dexnum:`** El número asociado a la Pokédex del Pokémon.

* **`name:`**  El nombre oficial del Pokémon.

* **`generation:`** La generación a la que corresponde el pokemon. Cada generación se caracteriza por la introducción de nuevas especies de Pokémon.

* **`type1:`** La clasificación elemental del Pokémon, que determina sus fortalezas y debilidades en combate. Algunos pokémon pueden tener dos tipos.

* **`type2:`** El segundo tipo del Pokémon en caso de que lo tenga.

* **`height:`** La altura oficial del Pokémon, generalmente en metros (Sistema Internacional).

* **`weight:`** El peso oficial del Pokémon, generalmente en kilogramos(Sistema Internacional).

* **`ability1:`** Habilidad especiales o innata del Pokémon, que pueden influir en el combate o proporcionar efectos únicos.

* **`ability2:`** Segunda habilidad especial del Pokémon en caso de que tenga más de una.

* **`hidden_ability:`** Habilidad oculta del Pokémon que es diferente de sus habilidades normales que no siempre están disponibles en un Pokémon al ser capturado o al criarse de manera estándar. Suelen proporcionar ventajas estratégicas en combate.

* **`hp (health points):`** La cantidad de puntos de salud del Pokémon, que determina cuánto daño puede recibir antes de desmayarse en combate.

* **`attack:`** La estadística que determina la potencia de los ataques físicos del Pokémon en combate.

* **`defense:`** La estadística que mide la capacidad del Pokémon para resistir ataques físicos en combate.

* **`sp_atk (special attack):`** La estadística que mide la potencia de los ataques especiales del Pokémon, como ataques de tipo elemental (fuego, agua, etc.).

* **`sp_def (special defense):`** La estadística que mide la capacidad del Pokémon para resistir ataques especiales (movimientos no físicos).

* **`speed:`** La estadística que determina qué tan rápido actúa el Pokémon en combate, lo que influye en el orden de los turnos.

* **`total:`** La suma total de las principales estadísticas de combate del Pokémon, entre las que se incluyen: Puntos de Salud (hp), Ataque (attack), Defensa (defense), Ataque Especial (sp_atk), Defensa Especial (sp_def), y Velocidad (speed). 

* **`percent_male:`** El porcentaje de probabilidades de que un Pokémon sea de género masculino. También se puede dar la posibilidad de que un Pokémon no tenga género.

* **`percent_female:`** El porcentaje de probabilidades de que un Pokémon sea de género femenino. También se puede dar la posibilidad de que un Pokémon no tenga género.


# Importación de datos y carga de paquetes
En primer lugar, cargaremos las librerías con las que trabajaremos.

```{r}
library(stringr)
library(tidyverse)
library(summarytools)
library(GGally)
library(readxl)
library(knitr)
library(remotes)
library(kableExtra)
library(ggplot2)
```

A continuación, leeremos los datos del documento.

```{r}
pokemon_table <- read_csv("pokemon_data.csv")
```

# ANÁLISIS EXPLORATORIO DE DATOS

Empezaremos con el primer objetivo de estudio, si el físico de los pokemon influye de sobremanera en los combates. 

## Datos univariantes

### 1.2 Estadisticas individuales de Pokémon





```{r}


# Gráfico de barras para HP
ggplot(pokemon_table, aes(x = hp)) +
  geom_histogram(fill = "skyblue", color = "black") +
  labs(title = "Distribución de HP", x = "HP", y = "Frecuencia") +
  theme_minimal()
```

El gráfico de barras se utiliza para mostrar la frecuencia con la que aparecen diferentes valores de HP (puntos de salud) en los Pokémon. Cada barra representa la cantidad de Pokémon que tienen un determinado rango de HP. Este gráfico es útil para visualizar qué tan común es un cierto nivel de HP en nuestra muestra.

Como podemos observar , en la gráfica abundan los valores que poseen alrededor de 50 o 80 puntos de salud , curiosamente hay Pokémon que poseen mas de 200 puntos de vida, porque hay excepciones con caracteristicas extremas. 

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/799.png){width=30% height=30%}

### Guzzlord HP : 223 

**Vida alta no implica que sea un pokémon muy defensivo**

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/213.png){width=30% height=30%}


### Shuckle HP : 20 

**Bajos puntos de vida no implica que sea derrotado al momento**







```{r}

# Gráfico de barras para Special Defense
ggplot(pokemon_table, aes(x = sp_def)) +
  geom_histogram(fill = "lightgreen", color = "black") +
  labs(title = "Distribución de Defensa Especial", x = "Defensa Especial", y = "Frecuencia") +
  theme_minimal()

```




La velocidad en los combates Pokémon es un factor crucial, porque determina que pokemon tiene prioridad para atacar antes, existen combates donde se decide el resultado solo por la velocidad. Existen excepciones como ciertos movimientos que permiten atacar antes ignorando la comparación de velocidades o ciertas habilidades.

Vamos a realizar un análisis de como se distribuye la velocidad 

```{r}

ggplot(pokemon_table, aes(x = speed)) + 
  geom_histogram(binwidth = 5, fill = "green", color = "black") + 
  labs(title = "Distribución de la Velocidad", 
       x = "Velocidad (entero)", 
       y = "Pokémon con x velocidad") +
  theme_minimal()


```

En la gráfica superior se ha recogido mediante un histograma todos los Pokémon. Como podemos observar, la mayoría de los valores oscilan entre 30 y 100, factor que puede estar influenciado por las especies,  evoluciones o naturaleza interna de los Pokémon.

Para contrastar estos valores, se calculará la media , mediana , moda y desviación estándar.


```{r}
media_speed <- mean(pokemon_table$speed, na.rm = TRUE)

# Mediana de las velocidades
mediana_speed <- median(pokemon_table$speed, na.rm = TRUE)

# Moda de las velocidades (a veces no hay una función directa en R para la moda, pero podemos hacerla manualmente)
moda_speed <- as.numeric(names(sort(table(pokemon_table$speed), decreasing=TRUE)[1]))

# Desviación estándar de las velocidades
de_speed <- sd(pokemon_table$speed, na.rm = TRUE)


```

#### **Media**
La **media** indica el valor promedio de las velociades teniendo en cuenta los valores extremos, tanto bajos como altos, y medios.

```{r}
media_speed <- round(media_speed, 0)
media_speed

```


#### **Mediana**
La **mediana** de las velocidades indica el valor central de la distribución, contemplando el punto en el que la mitad de los Pokémon son más lentos y la otra mitad son más rápidos. Es decir, ofrece una visión más equilibrada de la velocidad típica.

```{r}
mediana_speed <- round(mediana_speed, 0)
mediana_speed

```

#### **Moda**
La **moda** es la velocidad que se repite con más frecuencia entre los Pokémon. Puede indicar grupos de Pokémon con capacidades similares.

```{r}

moda_speed <- round(moda_speed ,0)
moda_speed

```

**Una moda de 50 es un problema porque hay un factor clave y es que al haber pokemon que son formas que evolucionan de otras especies , no se utilizan en el ambito competitivo del mundo Pokémon.Sin embargo, los tomamos en cuenta porque dentro del juego inevitablemente hay que usarlos en algun momento**

#### **Desviación Estándar**
La **desviación estándar** refleja cómo se distribuyen las velocidades en relación con la media. Si la desviación estándar es alta, significa que habrá Pokémon con velocidades muy variadas, desde muy lentos hasta muy rápidos. Si es baja, las velocidades estarán más concentradas alrededor de la media, lo que indica que la mayoría de los Pokémon tienen velocidades similares.

```{r}
de_speed <- round(de_speed, 0)
de_speed

```

### 1.3 Distribución de los pesos

El peso es uno de los factores más influyentes a la hora de garantizar un cierto grado de verosimilitud en un videojuego. Concretamente, en el caso del análisis, permite observar cómo este afectará a otros datos estadísticos como la velocidad, defensa, entre otros. Por lo tanto, se analizará primero de manera univariante para, posteriormente, poder relacionarla con otras estadísticas comprendiendo su forma de ser en el mundo de Pokémon.

```{r}

# Eliminar comas o espacios en blanco si existen
# pokemon_table$weight <- gsub(",", "", pokemon_table$weight)
# pokemon_table$weight <- gsub(" ", "", pokemon_table$weight)

# Convertir a numérico
pokemon_table$weight <- as.numeric(pokemon_table$weight)

ggplot(pokemon_table[pokemon_table$weight < 1000, ], aes(x = weight)) + 
  geom_histogram(binwidth = 10, fill = "green", color = "black") + 
  labs(title = "Distribución del Peso", x = "Peso (kg)", y = "Frecuencia") +
  theme_minimal()
```

En la gráfica superior se ha recogido mediante un histograma todos los Pokémon. Como podemos observar, la mayoría de los valores oscilan entre 30 y 100, factor que puede estar influenciado por las especies,  evoluciones o naturaleza interna de los Pokémon.

Para contrastar estos valores, se calculará la media , mediana , moda y desviación estándar.


```{r}
# Filtrar los valores mayores a 1000 para evitar errores
filtered_weight <- pokemon_table$weight[pokemon_table$weight <= 1000]

# Media de los pesos
media_weight <- mean(filtered_weight, na.rm = TRUE)

# Mediana de los pesos
mediana_weight <- median(filtered_weight, na.rm = TRUE)

# Moda de los pesos
moda_weight <- as.numeric(names(sort(table(filtered_weight), decreasing=TRUE)[1]))

# Desviación estándar de los pesos
de_weight <- sd(filtered_weight, na.rm = TRUE)


```

#### **Media**
La **media** señala el valor promedio de los pesos considerando los valores extremos y medios.

```{r}
media_weight <- round(media_weight, 0)
media_weight

```

Por lo que se puede ver en el resultado, los Pokémon suelen tener pesos alrededor de los 93kg (utilizando medidas de masa), aunque existen una gran variedad de estos seres con peso menor y una cantidad bastante más reducida con pesos mayores, alcanzando hasta los 1000kg.


#### **Mediana**
La **mediana** de los pesos indica el valor central de la distribución, enseñando el punto en el que una mitad de los Pokémon son más ligeros y la otra mitad son más pesados. Es decir, ofrece una visión más equilibrada del peso típico.

```{r}
mediana_weight <- round(mediana_weight, 0)
mediana_weight

```

El resultado confirma que la gran mayoría de los Pokémon tienen un peso reducido, con lo cual al existir el fenómeno de la evolucion pokemon , pues los pokemon van ganando peso a medida que evolucionan a una fase superior. Por si sola , puede parecer no tener correlación con ninguna otra estadística 







hecho cuya causa podría consistir en la necesidad de atraer al público joven al mundo de Pokémon y, por lo tanto, Nintendo recurriendo a la creación de seres de un tamaño y peso más reducido, más adorables o atractivos visualmente para una audiencia de temprana edad.


#### **Moda**
La **moda** consiste en el peso que aparece con mayor frecuencia entre los Pokémon.

```{r}

moda_weight <- round(moda_weight ,0)
moda_weight

```

El resultado puede parecer algo inusual, pero considerando que todos los pesos están expresados con decimales, lo que provoca un mayor abarque de cantidades numéricas, unido a la inmensa cantidad de Pokémon de peso reducido, tiene lógica que el resultado de la moda sea un valor tan reducido como este.

#### **Desviación Estándar**
La **desviación estándar** muestra cómo se distribuyen los pesos en relación con la media. Si la desviación estándar es alta, significa que habrá Pokémon con pesos muy variados, dejando lugar a un abanico más amplio de posisiblidades de distribución de estadísticas tanto de combate como la velocidad y defensa, así como otras más secundarias como el tamaño del Pokémon. Si es baja, los pesos estarán más concentradas alrededor de la media, lo que indica que la mayoría de los Pokémon tienen velocidades similares.

```{r}
de_weight <- round(de_weight, 0)
de_weight

```

En este caso, la desviación típica confirma la existencia de una amplia variedad de pesos en el mundo de Pokémon.

### 1.4 Frecuencia de los tipos elementales

Los tipos elementales de los Pokémon son fundamentales para determinar sus fortalezas y debilidades en combate. Cada tipo interactúa de manera específica con otros tipos, lo que influye en la estrategia a seguir durante las batallas y en el desempeño general de cada Pokémon.

En esta sección realizaremos dos análisis distintos: primero examinaremos la frecuencia de los tipos para ver cuál es el más común (contando primer y segundo tipo para el recuento). Posteriormente, llevaremos a cabo un análisis de los tipos combinados que nos permitirá explorar la diversidad y las interacciones entre diferentes tipos en un solo Pokémon.

<br>

#### **Tipos elementales**

```{r}
# Contar la frecuencia de tipos elementales (type1 y type2)
tipo_frecuencia <- pokemon_table %>%
  select(type1, type2) %>%
  pivot_longer(cols = c(type1, type2), names_to = "Tipo", values_to = "Elemento") %>%
  filter(!is.na(Elemento) & Elemento != "") %>%
  group_by(Elemento) %>%
  summarise(Frecuencia = n()) %>%
  arrange(desc(Frecuencia))

# Gráfico de barras de la frecuencia de tipos elementales
ggplot(tipo_frecuencia, aes(x = reorder(Elemento, -Frecuencia), y = Frecuencia)) +
  geom_bar(stat = "identity", fill = "steelblue", color = "black") +
  labs(title = "Frecuencia de Tipos Elementales (type1 y type2)",
       x = "Tipo Elemental",
       y = "Frecuencia") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
<br>
Como se puede observar en el gráfico anterior, los tipos más frecuentes (en orden de mayor a menor) son el agua (water), normal (normal), planta (grass), volador (flying) y psíquico (psychic), mientras que los menos frecuentes son el tipo hielo (ice) y el hada (fairy). Cabe destacar que este es uno de los últimos introducidos en el videojuego.

<br>

#### **Tipos combinados**

En este segundo análisis se han limitado las combinaciones de tipos a solo los diez más frecuentes. Esta decisión se tomó debido a la dificultad de manejar la gran cantidad de combinaciones que podrían existir, lo que haría que la visualización fuese menos clara y más difícil de interpretar.

```{r}
# Filtrar los Pokémon que tienen un segundo tipo
tipo_combinado <- pokemon_table %>%
  filter(!is.na(type2) & type2 != "") %>%  # Excluir combinaciones sin type2
  group_by(type1, type2) %>%
  summarise(Frecuencia = n(), .groups = 'drop') %>%
  arrange(desc(Frecuencia))

# Obtener los 10 tipos combinados más frecuentes
tipo_combinado_summary <- tipo_combinado %>%
  slice_head(n = 10)  # Seleccionar las 10 combinaciones más frecuentes

# Crear una función para discretizar tipos combinados
discretizar_tipos <- function(type1, type2) {
  if (type1 == "Normal" && type2 == "Flying") {
    return("Normal/Volador")
  } else if (type1 == "Grass" && type2 == "Poison") {
    return("Planta/Veneno")
  } else if (type1 == "Bug" && type2 == "Flying") {
    return("Bicho/Volador")
  } else if (type1 == "Bug" && type2 == "Poison") {
    return("Bicho/Veneno")
  } else if (type1 == "Fire" && type2 == "Flying") {
    return("Fuego/Volador")
  } else if (type1 == "Water" && type2 == "Ground") {
    return("Agua/Tierra")
  } else if (type1 == "Psychic" && type2 == "Fairy") {
    return("Psíquico/Hada")
  } else if (type1 == "Dragon" && type2 == "Flying") {
    return("Dragón/Volador")
  } else if (type1 == "Ice" && type2 == "Flying") {
    return("Hielo/Volador")
  } else if (type1 == "Electric" && type2 == "Flying") {
    return("Eléctrico/Volador")
  } else if (type1 == "Steel" && type2 == "Psychic") {
    return("Acero/Psíquico")
  } else if (type1 == "Water" && type2 == "Flying") {
    return("Agua/Volador")
  } else if (type1 == "Bug" && type2 == "Grass") {
    return("Bicho/planta")
  } else if (type1 == "Dark" && type2 == "Flying") {
    return("Siniestro/Volador")
  } else {
    return(NA)  
  }
}

# Aplicar la función a los tipos combinados más comunes
tipo_combinado_summary <- tipo_combinado_summary %>%
  mutate(tipo_discretizado = mapply(discretizar_tipos, type1, type2))

# Mostrar el resultado final
print(tipo_combinado_summary)
```

En esta discretización se pueden observar los diez tipos combinados más frecuentes en el mundo Pokémon, junto al número de Pokémon que hay de cada una de estas combinaciones.


```{r}
# Filtrar los Pokémon que tienen un segundo tipo
tipo_combinado <- pokemon_table %>%
  filter(!is.na(type2) & type2 != "") %>%
  group_by(type1, type2) %>%
  summarise(Frecuencia = n(), .groups = 'drop') %>%
  arrange(desc(Frecuencia))

# Crear una tabla de frecuencias para el gráfico, limitando a los 10 más frecuentes
tipo_combinado_summary <- tipo_combinado %>%
  slice_head(n = 10)  # Seleccionar las 10 combinaciones más frecuentes

# Gráfico de barras de los tipos combinados más frecuentes
ggplot(tipo_combinado_summary, aes(x = reorder(paste(type1, type2, sep = "/"), -Frecuencia), y = Frecuencia)) +
  geom_bar(stat = "identity", fill = "steelblue", color = "black") +
  labs(title = "Tipos Combinados más Frecuentes",
       x = "Tipos Combinados",
       y = "Frecuencia") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

En la gráfica presentada arriba se puede observar que los tipos combinados más frecuentes son: el normal/volador (normal/flying), el planta/veneno (grass/poison), el bicho/volador (bug/flying) y el bicho/veneno (bug/poison). Es importante destacar que, dentro de los diez tipos combinados más frecuentes, el tipo volador aparece en cuatro ocasiones y el tipo bicho en tres.


### 1.5 Número de Pokémon por Generación

Cada nueva generación de Pokémon trae consigo, además de muchas otras novedades, nuevas especies de estos nunca vistas anteriormente. Saber la proporción de nuevos Pokémon añadidos en cada una puede reflejar muchos aspectos de la respectiva región en la que ocurre cada juego.

Analicemos primero la proporción de Pokémon por generación con una gráfica:

```{r}
ggplot(pokemon_table, aes(x = as.factor(generation))) + 
  geom_bar(fill = "green", color = "black") + 
  labs(title = "Proporción de Pokémon por Generación", 
       x = "Generación", 
       y = "Nº de Pokémon") +
  theme_minimal()

```

Una vez observada la gráfica podemos determinar que la progresión no es lineal, no en las primeras 5 generaciones por lo menos, ya que, a partir de la sexta generación, podemos ver como el número de nuevos Pokémon aumenta en cada generación consecutivamente. Además, se puede observar que la generación en la que se introdujo un mayor número de Pokémon fue en la quinta generación, lo cual es lógico teniendo en cuenta que fue la única generación después de la primera en la que solo podías encontrar Pokémon naturalmente de esa generación específica hasta completar la historia principal.

#### **Frecuencias absolutas y frecuencias relativas**

Podemos hallar las frecuencias absolutas y relativas para observar con mayor detalle la cantidad de Pokémon que se introdujeron en cada generación y el porcentaje del total que corresponde:

```{r}
# Cálculo de frecuencias absolutas y relativas
frecuencia_absoluta <- table(pokemon_table$generation)
frecuencia_relativa <- prop.table(frecuencia_absoluta) * 100

# Crear una tabla
tabla_frecuencias <- data.frame(
  Generación = as.factor(names(frecuencia_absoluta)),
  Frecuencia_Absoluta = as.vector(frecuencia_absoluta),
  Frecuencia_Relativa = round(as.vector(frecuencia_relativa), 2)
)

# Mostrar la tabla
print(tabla_frecuencias)

```

Esto nos confirma que la generación con mayor número de Pokémon introducidos fue la quinta generación con 156 nuevas criaturas. En el lado opuesto la generación que menos Pokémon introdujo fue la sexta con solo 72 nuevos monstruos de bolsillo. Además, podemos observar que durante las primeras generaciones hubo mayor número de incorporaciones a la Pokedex, únicamente bajando del 10% del total la segunda generación, siendo igualemente mayor a la sexta, séptima y octava generación.

Para poder verificar estas afirmaciones, se realizará la media y la moda.


```{r}
#Media de Pokémon por generación
media_gen <- mean(frecuencia_absoluta)

#Moda de Pokémon por generación
moda_gen <- as.numeric(names(which.max(frecuencia_absoluta)))

#Desviación estándar por generación
de_gen <- sd(frecuencia_absoluta)

```

#### **Media**
La **media** nos da el número de Pokémon promedio que se incluyen por generación.

```{r}
media_gen <- round(media_gen, 0)
media_gen

```

Observando este resultado y comparándolo con las frecuencias absolutas, se puede observar que las generaciones con menor número de Pokémon están muy por debajo de lo habitual, especialmente en las mencionadas anteriormente. Incluso es sorprendente que la cuarta generación quede por debajo de la media siendo que no parecía tan por debajo de las demás en un primer momento, lo que nos demuestra la diferencia que hay entre generaciones.


#### **Moda**
La **moda** nos dará la generación en la que más Pokémon se introdujeron.

```{r}

moda_gen <- round(moda_gen ,0)
moda_gen

```

Como era de esperar, la quinta generación es la que más Pokémon añadió tal y como se mencionó anteriormente, sin embargo este resultado lo termina de confirmar.

#### **Desviación Estándar**
La **desviación estándar** nos mostrará la diferencia que hay entre generaciones con respecto a la media. Un número alto significará que hay poco equilibrio entre el número de Pokémon introducidos en cada generación y un número bajo significaría que hay bastante equilibrio.

```{r}
de_gen <- round(de_gen, 0)
de_gen

```

Como se puede ver, la desviación es algo alta respecto de la media, por lo que se puede afirmar que hay cierto desequilibrio entre generaciones.




### 1.6 Género

Los Pokémon tienen la capacidad de ser machos, hembras o pueden no tener género. En este caso se va a analizar individualmente la posibilidad de que en estado salvaje un Pokémon sea macho y la posibilidad de que sea hembra,para comprobar que genero es mas viable en combate, porque hay movimientos Pokémon en los cuales el ser de un genero u otro puede decidir un combate (ej. Atracción). 


```{r}
table(pokemon_table$percent_male, pokemon_table$percent_female)
  

```

```{r}
ggplot(pokemon_table, aes(x = percent_female)) +
  geom_histogram(binwidth = 10, fill = "lightpink", color = "black", na.rm = TRUE) +
  labs(title = "Distribución del Porcentaje de Pokémon Hembras",
       x = "Porcentaje de Hembras",
       y = "Frecuencia") +
  theme_minimal()
```


Estas dos tablas estan intrínsicamente relacionadas , precisamente porque se compensan por cada especie de pokemon , por ejemplo , si un


## Datos bivariantes

### 2.2 Velocidad vs Defensa

Uno de los factores que se pueden ver influidos por la velocidad es la defensa, puesto que, generalmente, un Pokémon con altas defensas suele conllevar en si una velocidad baja, y viceversa.

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/805.png){width=30% height=30%}

### Stakataka Velocidad : 13 

**Una baja velocidad no implica necesariamente que el pokemon este en desventaja.**

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/795.png){width=30% height=30%}


### Pheromosa Velocidad : 151 

**Tener una velocidad alta no garantiza la victoria ante el rival.**


Para comprobar si las defensas y las velocidades estan correlacionadas, se realizará un gráfico de dispersión. 

```{r}
ggplot(pokemon_table, aes(x = speed, y = defense)) +
  geom_point() +  
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  facet_wrap("type1") +
  labs(title = "Relación entre Velocidad y Defensa",
       x = "Velocidad",
       y = "Defensa") +
  theme_minimal()

```

```{r}
pokemon_table |> 
    filter(
      type1 == "Fairy") |> 
  ggplot(aes(x = speed, y = defense)) +
  geom_point() +  
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  labs(title = "Relación entre Velocidad y Defensa",
       x = "Velocidad",
       y = "Defensa") +
  theme_minimal()
```

```{r}

lm()
summary()

```


### 2.3 Altura VS Velocidad

La altura de los Pokémon también resulta un factor digno de estudio en relación con la velocidad.

```{r}
# Filtrar valores irreales
filtered_pokemon <- pokemon_table %>%
  filter(height <= 20, speed <= 200)

# Crear el gráfico ajustado
ggplot(filtered_pokemon, aes(x = height, y = speed)) + 
  geom_point(color = "green", alpha = 0.6, width = 0.3, height = 0.1) +  # Añade jitter para dispersar puntos
  labs(title = "Relación entre Altura y Velocidad", x = "Altura (m)", y = "Velocidad") +
  theme_minimal()
```

De este gráfico, se pueden obtener diversas conclusiones:

- Los puntos están bastante dispersos en toda la gráfica sin una tendencia clara; los Pokémon, independientemente de su altura, cubren un rango similar de velocidades.

- La mayoría de los Pokémon tienen velocidades entre 0 y 100, con casos que superan el valor de 150 y pueden alcanzar 200.

- La mayor parte de los Pokémon tienen alturas entre 0.1m y 2.5m, aunque algunos llegan a los 20m. Igualmente, no muestran una relación clara con velocidades más altas o bajas.

- Hay algunas densidades más altas alrededor de ciertas alturas (por ejemplo, en torno a 0 m y 2.5 m), pero estas no están asociadas con un rango específico de velocidades, puesto que los puntos están dispersos a lo largo de las diferentes velocidades.

Por todas estas conclusiones, se puede deducir que **la velocidad y la altura no tienen una relación directa** entre si. Además, otros aspectos como el tipo de Pokémon, su peso o sus estadísticas individuales juegan un papel más importante en determinar la velocidad que la altura por sí sola.

### 2.4 Comparación entre Tipo Elemental y las estadísticas de combate del Pokémon

```{r}
# Filtrar solo los Pokémon monotipos (type2 es NA)
pokemon_monotipos <- pokemon_table %>% filter(is.na(type2))
```

En esta sección, se examinará la relación entre los tipos elementales y las siguientes estadísticas de combate: hp, attack, special_attack, defense, y special_defense. A continuación se presentan gráficos y análisis detallados para cada estadística de combate con el objetivo de determinar que tipos Pokémon están más especializados en una clase de combate u otro, ya sea un combate por ataques físicos o por ataques especiales.

**Nota:** Los Pokémon considerados en el análisis son solo aquellos que tienen un único tipo (monotipos). 

<br>

#### 2.4.1 Health points
Primero se analizará la relación entre los puntos de salud (HP) y los tipos elementales Pokémon:

```{r}
# Gráfico de caja para HP
ggplot(pokemon_monotipos, aes(x = type1, y = hp)) +
  geom_boxplot() +
  labs(title = "Distribución de puntos de salud por Tipo de Pokémon Monotipo",
       x = "Tipo de Pokémon (type1)",
       y = "Puntos de salud (HP)") +
  theme_minimal() +
  coord_flip()
```

En este gráfico de caja, se pueden observar las diferencias en los valores de HP entre los distintos tipos de Pokémon. Aunque los valores de HP presentan algunas diferencias (sobre todo con los tipos bicho y fantasma), estas no son demasiado pronunciadas, lo que sugiere que, en general, la mayoría de los Pokémon monotipos tienen valores de HP relativamente similares.

```{r}
# Estadísticas descriptivas de HP
mean_hp <- mean(pokemon_monotipos$hp, na.rm = TRUE)
sd_hp <- sd(pokemon_monotipos$hp, na.rm = TRUE)
min_hp <- min(pokemon_monotipos$hp, na.rm = TRUE)
max_hp <- max(pokemon_monotipos$hp, na.rm = TRUE)

min_hp_pokemon <- pokemon_monotipos %>% filter(hp == min_hp)
max_hp_pokemon <- pokemon_monotipos %>% filter(hp == max_hp)

cat("Media de HP:", mean_hp, "\n")
median_hp <- median(pokemon_monotipos$hp, na.rm = TRUE)
cat("Mediana de HP:", median_hp, "\n")
```
La media de los puntos de HP para los Pokémon monotipos es de 67.57715, mientras que la mediana es de 65, lo que indica que la distribución de valores es bastante uniforme.

```{r}
cat("Desviación estándar de HP:", sd_hp, "\n")
```
La desviación estándar es de 28.32747. Esto indica que la variabilidad de los valores de HP entre los diferentes Pokémon monotipos es moderada. Existe dispersión, pero no es ni extremadamente alta ni extremadamente baja.

```{r}
cat("Pokémon con menor HP:", min_hp_pokemon$name, "del tipo", min_hp_pokemon$type1, "\n")
cat("Pokémon con mayor HP:", max_hp_pokemon$name, "del tipo", max_hp_pokemon$type1, "\n")
```
Los Pokémon con menores valores en su HP son Diglett de tipo tierra y Wiglett de tipo agua mientras que el Pokémon con mayor HP es Blissey de tipo normal. Salvo por Diglett, los valores de los otros dos concuerdan con la tendencia general del gráfico. 

<br>

#### 2.4.2 Ataque
A continuación se analizará la relación entre el ataque (Attack) y los tipos elementales Pokémon:

```{r}
# Gráfico de caja para Ataque
ggplot(pokemon_monotipos, aes(x = type1, y = attack)) +
  geom_boxplot() +
  labs(title = "Distribución de Ataque por Tipo de Pokémon Monotipo",
       x = "Tipo de Pokémon (type1)",
       y = "Ataque (Attack)") +
  theme_minimal() +
  coord_flip()
```

En el box-plot anterior, se pueden observar las diferencias en los valores de Ataque entre los distintos tipos de Pokémon. La dispersión entre los valores es más notable que en el caso de los HP, sugiriendo que algunos tipos tienen un mayor potencial ofensivo que otros, como los tipos lucha y roca.

```{r}
# Estadísticas descriptivas de Ataque
mean_attack <- mean(pokemon_monotipos$attack, na.rm = TRUE)
sd_attack <- sd(pokemon_monotipos$attack, na.rm = TRUE)
min_attack <- min(pokemon_monotipos$attack, na.rm = TRUE)
max_attack <- max(pokemon_monotipos$attack, na.rm = TRUE)

min_attack_pokemon <- pokemon_monotipos %>% filter(attack == min_attack)
max_attack_pokemon <- pokemon_monotipos %>% filter(attack == max_attack)

cat("Media de Ataque:", mean_attack, "\n")
median_attack <- median(pokemon_monotipos$attack, na.rm = TRUE)
cat("Mediana de Ataque:", median_attack, "\n")
```

La media del ataque para los Pokémon monotipos es de 73.66934, mientras que el de la mediana es de 70, lo que de nuevo significa que no hay muchos valores atípicos.

```{r}
cat("Desviación estándar de Ataque:", sd_attack, "\n")
```

La desviación estándar es de 29.18733. Esto sugiere que hay una variabilidad considerable en el ataque de los Pokémon según su tipo, es decir, algunos Pokémon tienen ataques muy por encima o por debajo del promedio, reflejando una diversidad en sus capacidades ofensivas.

```{r}
cat("Pokémon con menor Ataque:", min_attack_pokemon$name, "del tipo", min_attack_pokemon$type1, "\n")
cat("Pokémon con mayor Ataque:", max_attack_pokemon$name, "del tipo", max_attack_pokemon$type1, "\n")
```

Los Pokémon con menores valores en su ataque son Chansey y Happiny, ambos de tipo normal (siendo estos valores atípicos) y el Pokémon con mayor ataque es Rampardos (tipo roca), que pertenece a uno de los tipos de Pokémon con un ataque promedio más alto.

<br>

#### 2.4.3 Defensa
A continuación se analizará la relación entre la defensa (Defense) y los tipos elementales de Pokémon:

```{r}
# Gráfico de caja para Defensa
ggplot(pokemon_monotipos, aes(x = type1, y = defense)) +
  geom_boxplot() +
  labs(title = "Distribución de Defensa por Tipo de Pokémon Monotipo",
       x = "Tipo de Pokémon (type1)",
       y = "Defensa (Defense)") +
  theme_minimal() +
  coord_flip()
```

Este gráfico representa la distribución de la defensa en relación a los tipos de Pokémon. Los valores refejados en él son algo dispares, sobresaliendo los tipos roca y acero como aquellos con mayores estadísticas en este ámbito.


```{r}
# Estadísticas descriptivas de Defensa
mean_defense <- mean(pokemon_monotipos$defense, na.rm = TRUE)
sd_defense <- sd(pokemon_monotipos$defense, na.rm = TRUE)
min_defense <- min(pokemon_monotipos$defense, na.rm = TRUE)
max_defense <- max(pokemon_monotipos$defense, na.rm = TRUE)

min_defense_pokemon <- pokemon_monotipos %>% filter(defense == min_defense)
max_defense_pokemon <- pokemon_monotipos %>% filter(defense == max_defense)

cat("Media de Defensa:", mean_defense, "\n")
median_defense <- median(pokemon_monotipos$defense, na.rm = TRUE)
cat("Mediana de Defensa:", median_defense, "\n")
```
La media de la defensa para los Pokémon monotipos es de 67.32064, mientras que el valor de la mediana es de 63. Esto refleja una uniformidad bastante evidente respecto al centro de la distribución, a excepción de algunos tipos de Pokémon.


```{r}
cat("Desviación estándar de Defensa:", sd_defense, "\n")
```

La desviación estándar es de 27.11069, indicando que que hay una variabilidad notable entre los Pokémon, ya que la mayoría de sus valores van desde aproximadamente 40.21 hasta 94.43 puntos.


```{r}
cat("Pokémon con menor Defensa:", min_defense_pokemon$name, "del tipo", min_defense_pokemon$type1, "\n")
cat("Pokémon con mayor Defensa:", max_defense_pokemon$name, "del tipo", max_defense_pokemon$type1, "\n")
```

Los Pokémon con menos defensa son Chansey y Happiny, ambos de tipo normal, mientras que el Pokémon con mayor defensa es Regirock de tipo roca, concordando con la tendencia observada de que los tipo roca y acero sean los que suelen tener unos mayores valores en este atributo.

<br>

#### 2.4.4 Ataque especial

En este subapartado se analizará la relación entre el Ataque especial (sp_atk) y los tipos elementales Pokémon:

```{r}
# Gráfico de caja para Ataque Especial
ggplot(pokemon_monotipos, aes(x = type1, y = sp_atk)) +
  geom_boxplot() +
  labs(title = "Distribución de Ataque Especial por Tipo de Pokémon Monotipo",
       x = "Tipo de Pokémon (type1)",
       y = "Ataque especial (sp_atk)") +
  theme_minimal() +
  coord_flip()
  
```

El análisis muestra la variación del ataque especial en los distintos tipos Pokémon. La distribución de los valores no es demasiado diferente entre estos, a excepción de cinco de ellos: los tipo roca, tierra, lucha y bicho (Pokémon débiles en su ataque especial) y el tipo psíquico (que tiene un gran ataque especial).


```{r}
# Estadísticas descriptivas de Ataque Especial
mean_sp_atk <- mean(pokemon_monotipos$sp_atk, na.rm = TRUE)
sd_sp_atk <- sd(pokemon_monotipos$sp_atk, na.rm = TRUE)
min_sp_atk <- min(pokemon_monotipos$sp_atk, na.rm = TRUE)
max_sp_atk <- max(pokemon_monotipos$sp_atk, na.rm = TRUE)

min_sp_atk_pokemon <- pokemon_monotipos %>% filter(sp_atk == min_sp_atk)
max_sp_atk_pokemon <- pokemon_monotipos %>% filter(sp_atk == max_sp_atk)

cat("Media de Ataque Especial:", mean_sp_atk, "\n")
median_sp_atk <- median(pokemon_monotipos$sp_atk, na.rm = TRUE)
cat("Mediana de Ataque Especial:", median_sp_atk, "\n")
```

La media del ataque especial para los Pokémon monotipos es de 64.75952, mientras la mediana es de 60, evidenciado valores muy similares entorno al centro de la distribución.


```{r}
cat("Desviación estándar de Ataque Especial:", sd_sp_atk, "\n")
```

La desviación estándar es de 28.21935, lo cual indica, de nuevo, que la variabilidad del ataque es moderada, pero sin llegar a ser extrema.


```{r}
cat("Pokémon con menor Ataque Especial:", min_sp_atk_pokemon$name, "del tipo", min_sp_atk_pokemon$type1, "\n")
cat("Pokémon con mayor Ataque Especial:", max_sp_atk_pokemon$name, "del tipo", max_sp_atk_pokemon$type1, "\n")
```
Los Pokémon con menores valores en su ataque especial son Feebas y Bonsly, de tipo agua y roca respectivamente, a la vez que el Pokémon con mayor ataque especial es Xurkitree, de tipo eléctrico. Salvo Feebas (tipo agua), los otros dos Pokémon concuerdan con lo mostrado en el anterior gráfico, donde el tipo roca es uno de los más débiles en cuanto a ataque especial y el tipo psíquico es uno de los más fuertes. 

<br>

#### 2.4.5 Defensa especial
A continuación se analizará la relación entre la Defensa especial (sp_def) y los tipos elementales Pokémon:

```{r}
# Gráfico de caja para Defensa Especial
ggplot(pokemon_monotipos, aes(x = type1, y = sp_def)) +
  geom_boxplot() +
  labs(title = "Distribución de Defensa Especial por Tipo de Pokémon Monotipo",
       x = "Tipo de Pokémon (type1)",
       y = "Defensa especial (sp_def)") +
  theme_minimal() +
  coord_flip()
```

En este Box-plot se observa la distribución de la defensa especial entre los tipos de Pokémon. Esta no presenta grandes diferencias entre cada una de ellos. Los únicos que destacan débilmente por sus valores son los tipos roca y bicho (con bajo puntuaje en defensa especial) y los tipos fantasma hada y psíquico (altos valores).


```{r}
# Estadísticas descriptivas de Defensa Especial
mean_sp_def <- mean(pokemon_monotipos$sp_def, na.rm = TRUE)
sd_sp_def <- sd(pokemon_monotipos$sp_def, na.rm = TRUE)
min_sp_def <- min(pokemon_monotipos$sp_def, na.rm = TRUE)
max_sp_def <- max(pokemon_monotipos$sp_def, na.rm = TRUE)

min_sp_def_pokemon <- pokemon_monotipos %>% filter(sp_def == min_sp_def)
max_sp_def_pokemon <- pokemon_monotipos %>% filter(sp_def == max_sp_def)

cat("Media de Defensa Especial:", mean_sp_def, "\n")
median_sp_def <- median(pokemon_monotipos$sp_def, na.rm = TRUE)
cat("Mediana de Defensa Especial:", median_sp_def, "\n")
```

La media de la defensa especial para los Pokémon monotipos es de 65.98798, mientras que la mediana es de 60, por lo cual hay una considerable uniformidad de este atributo en torno al centro de la distribución.


```{r}
cat("Desviación estándar de Defensa Especial:", sd_sp_def, "\n")
```

La desviación estándar es de 25.9888, lo que implica una variablidad moderada, de lo que se deduce que, aunque los valores no estén muy dispersos, si hay cierto grado de diversidad entre las defensas especiales de los monotipos.


```{r}
cat("Pokémon con menor Defensa Especial:", min_sp_def_pokemon$name, "del tipo", min_sp_def_pokemon$type1, "\n")
cat("Pokémon con mayor Defensa Especial:", max_sp_def_pokemon$name, "del tipo", max_sp_def_pokemon$type1, "\n")
```

Los Pokémon con menores valores en su defensa especial son Caterpie, Magikarp y Stonjourner, de tipo bicho, agua y roca respectivamente (hecho que reafirma que los tipos roca y bicho sean los que menos defensa especial tengan), mientras que el Pokémon con mayor defensa especial es Regice, de tipo hielo.

<br>

En conlusión, se puede afirmar que existen ciertos tipos Pokémon especializados en un tipo de combate. Un buen ejemplo de esto son los tipos roca y acero que poseen valores muy elevados en su ataque y defensa física y valores algo más bajos en las mismas categorías de tipo especial. En contraposición, el tipo psíquico se caracteriza por su gran ataque y defensa especial. Además se puede identificar la existencia de Pokémon "tanques", Pokémon que no son fáciles de derrotar debido a su alta vida y sus atributos de defensa, aunque no tengan un gran poder de ataque.


### 2.5 Relación entre HP y Defensa

Las estadísticas  de HP (Puntos de vida) y Defensa podrían considerarse algo similar ya que ambas indican el aguante ante los golpes del enemigo, sin embargo no son lo mismo y existen casos en los que un Pokémon puede tener mucha HP y una defensa deplorable como es el caso de Chansey (Aunque esto lo ve compensado con una buena Defensa Especial).

Comprobemos si esto es cierto con el siguiente gráfico de dispersión:

```{r}
# Gráfico de dispersión
ggplot(pokemon_table, aes(x = hp, y = defense)) +
  geom_point(color = "blue") + 
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  labs(title = "Relación entre HP y Defensa con Línea de Tendencia",
       x = "Puntos de Salud (hp)",
       y = "Defensa") +
  theme_minimal()

```

Podemos observar que hay una tendencia positiva gracias a la línea roja, lo cual sugiere que sí que existe cierta relación entre HP y Defensa. Sin embargo no se puede afirmar que esto sea asi en la mayoría de casos ya que los puntos están poco concentrados, por lo que la relación anteriormente mencionada  no es muy fuerte.

Para contrastar este análisis se puede hallar el coeficiente de correlación para obtener datos cuantitativos:

#### **Coeficiente de correlación**

```{r}
# Calcular el coeficiente de correlación de Pearson entre HP y defensa
corhpdef <- cor(pokemon_table$hp, pokemon_table$defense)

```

```{r}
corhpdef <- (round(corhpdef, 2))
corhpdef
```

Debido a que el coeficiente de correlación es 0.3, podemos corroborar que la relación entre HP y Defensa es débil pero no inexistente. En conclusión, un Pokémon con una alta Defensa no tiene por qué tener una alta estadística de HP, sin embargo, estas suelen estar relacionadas en algunos casos y no son del todo independientes.


# Banco de pruebas

---SOLO PARA PRUEBAS ---
```{r}

```
