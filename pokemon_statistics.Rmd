---
title: "PRÁCTICA 1 ESTADÍSTICA DESCRIPTIVA: ANÁLISIS DE ESTADÍSTICAS POKEMON"
author: "GRUPO_6 : *Daniel Mazo*, *Miguel Amado*, *Luis Prieto*, *Alejandro Marín*, *Roberto Rojas*"
date: "Estadística Curso 2024-25"

output: html_document
---

```{r setup, include=FALSE, purl=FALSE}
knitr::opts_chunk$set(echo = FALSE, # Poner a TRUE si se quiere ver el código R.
                      eval = TRUE, 
                      warning = FALSE,
                      message = FALSE,
                      error = TRUE)
```

# Introducción y definición de objetivos

En la actualidad, el equilibrio en los videojuegos resulta un factor esencial para asegurar una experiencia de juego satisfactoria para el mayor arco de jugadores posible. La presencia de desequilibrio en el mundo de juego, ya sea debido a que los personajes tengan ciertas ventajas sobre otros puede causar preferencia de estos personajes o desagrado. Sin embargo, el mundo de Pokémon es ampliamente conocido por buscar un sistema de ventaja-desventaja cuyo equilibrio depende de si mismo.

Por esta razón, en este análisis se tratará la saga de Pokémon, altamente reconocible e influyente en el mundo de los videojuegos de la actualidad, con un alto grado de matemática y estadística en sus mecánicas, consiguiendo que la estrategia y el cálculo mental tengan una gran relevancia, mas allá de ser un juego con una paleta de colores amigable, diseñada para atraer a la audiencia más joven. 

El objetivo principal de este estudio consiste en que, mediante de la comparación entre las estadísticas físicas y de combate de los Pokémon, se buscará identificar patrones que determinen cómo estas características influyen en su efectividad y utilidad en el juego.

De esta manera, realizando diversos análisis univariantes y bivariantes, se podrá alcanzar una conclusion de qué tan equilibrado está en realidad el mundo de Pokémon. 


# Diccionario de datos
Para lograr ese objetivo, hemos recogido una serie de datos de los 1025 pokemon disponibles desde 1995 hasta la fecha, como se muestra a continuación.

* **`dexnum:`** El número asociado a la Pokédex del Pokémon.

* **`name:`**  El nombre oficial del Pokémon.

* **`generation:`** La generación a la que corresponde el pokemon. Cada generación se caracteriza por la introducción de nuevas especies de Pokémon.

* **`type1:`** La clasificación elemental del Pokémon, que determina sus fortalezas y debilidades en combate. Algunos pokémon pueden tener dos tipos.

* **`type2:`** El segundo tipo del Pokémon en caso de que lo tenga.

* **`height:`** La altura oficial del Pokémon, generalmente en metros (Sistema Internacional).

* **`weight:`** El peso oficial del Pokémon, generalmente en kilogramos(Sistema Internacional).

* **`ability1:`** Habilidad especiales o innata del Pokémon, que pueden influir en el combate o proporcionar efectos únicos.

* **`ability2:`** Segunda habilidad especial del Pokémon en caso de que tenga más de una.

* **`hidden_ability:`** Habilidad oculta del Pokémon que es diferente de sus habilidades normales que no siempre están disponibles en un Pokémon al ser capturado o al criarse de manera estándar. Suelen proporcionar ventajas estratégicas en combate.

* **`hp (health points):`** La cantidad de puntos de salud del Pokémon, que determina cuánto daño puede recibir antes de desmayarse en combate.

* **`attack:`** La estadística que determina la potencia de los ataques físicos del Pokémon en combate.

* **`defense:`** La estadística que mide la capacidad del Pokémon para resistir ataques físicos en combate.

* **`sp_atk (special attack):`** La estadística que mide la potencia de los ataques especiales del Pokémon, como ataques de tipo elemental (fuego, agua, etc.).

* **`sp_def (special defense):`** La estadística que mide la capacidad del Pokémon para resistir ataques especiales (movimientos no físicos).

* **`speed:`** La estadística que determina qué tan rápido actúa el Pokémon en combate, lo que influye en el orden de los turnos.

* **`total:`** La suma total de las principales estadísticas de combate del Pokémon, entre las que se incluyen: Puntos de Salud (hp), Ataque (attack), Defensa (defense), Ataque Especial (sp_atk), Defensa Especial (sp_def), y Velocidad (speed). 

* **`percent_male:`** El porcentaje de probabilidades de que un Pokémon sea de género masculino. También se puede dar la posibilidad de que un Pokémon no tenga género.

* **`percent_female:`** El porcentaje de probabilidades de que un Pokémon sea de género femenino. También se puede dar la posibilidad de que un Pokémon no tenga género.


# Importación de datos y carga de paquetes
En primer lugar, cargaremos las librerías con las que trabajaremos.

```{r}
library(stringr)
library(tidyverse)
library(summarytools)
library(GGally)
library(readxl)
library(knitr)
library(remotes)
library(kableExtra)
```

A continuación, leeremos los datos del documento.

```{r}
pokemon_table <- readxl::read_excel("pokemon_data.xlsx")

```

# Análisis exploratorio de datos

Empezaremos con el primer objetivo de estudio, si el físico de los pokemon influye de sobremanera en los combates. 

## Datos univariantes

### 1.2 Velocidad 

La velocidad en los combates Pokémon es un factor crucial, porque determina que pokemon tiene prioridad para atacar antes, existen combates donde se decide el resultado solo por la velocidad. Existen excepciones como ciertos movimientos que permiten atacar antes ignorando la comparación de velocidades o ciertas habilidades.

Vamos a realizar un análisis de como se distribuye la velocidad 

```{r}

ggplot(pokemon_table, aes(x = speed)) + 
  geom_histogram(binwidth = 5, fill = "green", color = "black") + 
  labs(title = "Distribución de la Velocidad", 
       x = "Velocidad (entero)", 
       y = "Pokémon con x velocidad") +
  theme_minimal()


```

En la gráfica superior se ha recogido mediante un histograma todos los Pokémon. Como podemos observar, la mayoría de los valores oscilan entre 30 y 100, factor que puede estar influenciado por las especies,  evoluciones o naturaleza interna de los Pokémon.

Para contrastar estos valores, se calculará la media , mediana , moda y desviación estándar.


```{r}
media_speed <- mean(pokemon_table$speed, na.rm = TRUE)

# Mediana de las velocidades
mediana_speed <- median(pokemon_table$speed, na.rm = TRUE)

# Moda de las velocidades (a veces no hay una función directa en R para la moda, pero podemos hacerla manualmente)
moda_speed <- as.numeric(names(sort(table(pokemon_table$speed), decreasing=TRUE)[1]))

# Desviación estándar de las velocidades
de_speed <- sd(pokemon_table$speed, na.rm = TRUE)


```

#### **Media**
La **media** indica el valor promedio de las velociades teniendo en cuenta los valores extremos, tanto bajos como altos, y medios.

```{r}
media_speed <- round(media_speed, 0)
media_speed

```


#### **Mediana**
La **mediana** de las velocidades indica el valor central de la distribución, contemplando el punto en el que la mitad de los Pokémon son más lentos y la otra mitad son más rápidos. Es decir, ofrece una visión más equilibrada de la velocidad típica.

```{r}
mediana_speed <- round(mediana_speed, 0)
mediana_speed

```

#### **Moda**
La **moda** es la velocidad que se repite con más frecuencia entre los Pokémon. Puede indicar grupos de Pokémon con capacidades similares.

```{r}

moda_speed <- round(moda_speed ,0)
moda_speed

```

**Una moda de 50 es un problema porque hay un factor clave y es que al haber pokemon que son formas que evolucionan de otras especies , no se utilizan en el ambito competitivo del mundo Pokémon.Sin embargo, los tomamos en cuenta porque dentro del juego inevitablemente hay que usarlos en algun momento**

#### **Desviación Estándar**
La **desviación estándar** refleja cómo se distribuyen las velocidades en relación con la media. Si la desviación estándar es alta, significa que habrá Pokémon con velocidades muy variadas, desde muy lentos hasta muy rápidos. Si es baja, las velocidades estarán más concentradas alrededor de la media, lo que indica que la mayoría de los Pokémon tienen velocidades similares.

```{r}
de_speed <- round(de_speed, 0)
de_speed

```

### 1.3 Distribución de los pesos

El peso es uno de los factores más influyentes a la hora de garantizar un cierto grado de verosimilitud en un videojuego. Concretamente, en el caso del análisis, permite observar cómo este afectará a otros datos estadísticos como la velocidad, defensa, entre otros. Por lo tanto, se analizará primero de manera univariante para, posteriormente, poder relacionarla con otras estadísticas comprendiendo su forma de ser en el mundo de Pokémon.

```{r}

# Eliminar comas o espacios en blanco si existen
# pokemon_table$weight <- gsub(",", "", pokemon_table$weight)
# pokemon_table$weight <- gsub(" ", "", pokemon_table$weight)

# Convertir a numérico
pokemon_table$weight <- as.numeric(pokemon_table$weight)

ggplot(pokemon_table[pokemon_table$weight < 1000, ], aes(x = weight)) + 
  geom_histogram(binwidth = 10, fill = "green", color = "black") + 
  labs(title = "Distribución del Peso", x = "Peso (kg)", y = "Frecuencia") +
  theme_minimal()
```

En la gráfica superior se ha recogido mediante un histograma todos los Pokémon. Como podemos observar, la mayoría de los valores oscilan entre 30 y 100, factor que puede estar influenciado por las especies,  evoluciones o naturaleza interna de los Pokémon.

Para contrastar estos valores, se calculará la media , mediana , moda y desviación estándar.


```{r}
# Filtrar los valores mayores a 1000 para evitar errores
filtered_weight <- pokemon_table$weight[pokemon_table$weight <= 1000]

# Media de los pesos
media_weight <- mean(filtered_weight, na.rm = TRUE)

# Mediana de los pesos
mediana_weight <- median(filtered_weight, na.rm = TRUE)

# Moda de los pesos
moda_weight <- as.numeric(names(sort(table(filtered_weight), decreasing=TRUE)[1]))

# Desviación estándar de los pesos
de_weight <- sd(filtered_weight, na.rm = TRUE)


```

#### **Media**
La **media** señala el valor promedio de los pesos considerando los valores extremos y medios.

```{r}
media_weight <- round(media_weight, 0)
media_weight

```

Por lo que se puede ver en el resultado, los Pokémon suelen tener pesos alrededor de los 93kg (utilizando medidas de masa), aunque existen una gran variedad de estos seres con peso menor y una cantidad bastante más reducida con pesos mayores, alcanzando hasta los 1000kg.


#### **Mediana**
La **mediana** de los pesos indica el valor central de la distribución, enseñando el punto en el que una mitad de los Pokémon son más ligeros y la otra mitad son más pesados. Es decir, ofrece una visión más equilibrada del peso típico.

```{r}
mediana_weight <- round(mediana_weight, 0)
mediana_weight

```

El resultado confirma que la gran mayoría de los Pokémon tienen un peso reducido, hecho cuya causa podría consistir en la necesidad de atraer al público joven al mundo de Pokémon y, por lo tanto, Nintendo recurriendo a la creación de seres de un tamaño y peso más reducido, más adorables o atractivos visualmente para una audiencia de temprana edad.


#### **Moda**
La **moda** consiste en el peso que aparece con mayor frecuencia entre los Pokémon.

```{r}

moda_weight <- round(moda_weight ,0)
moda_weight

```

El resultado puede parecer algo inusual, pero considerando que todos los pesos están expresados con decimales, lo que provoca un mayor abarque de cantidades numéricas, unido a la inmensa cantidad de Pokémon de peso reducido, tiene lógica que el resultado de la moda sea un valor tan reducido como este.

#### **Desviación Estándar**
La **desviación estándar** muestra cómo se distribuyen los pesos en relación con la media. Si la desviación estándar es alta, significa que habrá Pokémon con pesos muy variados, dejando lugar a un abanico más amplio de posisiblidades de distribución de estadísticas tanto de combate como la velocidad y defensa, así como otras más secundarias como el tamaño del Pokémon. Si es baja, los pesos estarán más concentradas alrededor de la media, lo que indica que la mayoría de los Pokémon tienen velocidades similares.

```{r}
de_weight <- round(de_weight, 0)
de_weight

```

En este caso, la desviación típica confirma la existencia de una amplia variedad de pesos en el mundo de Pokémon.

## Datos bivariantes

### 2.2 Velocidad vs Defensa

Uno de los factores que se pueden ver influidos por la velocidad es la defensa, puesto que, generalmente, un Pokémon con altas defensas suele conllevar en si una velocidad baja, y viceversa.

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/805.png){width=30% height=30%}

### Stakataka Velocidad : 13 

**Una baja velocidad no implica necesariamente que el pokemon este en desventaja.**

![](https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/795.png){width=30% height=30%}


### Pheromosa Velocidad : 151 

**Tener una velocidad alta no garantiza la victoria ante el rival.**


Para comprobar si las defensas y las velocidades estan correlacionadas, se realizará un gráfico de dispersión. 

```{r}
ggplot(pokemon_table, aes(x = speed, y = defense)) +
  geom_point() +  
  geom_smooth(method = "loess", se = FALSE, color = "red") + 
  labs(title = "Relación entre Velocidad y Defensa",
       x = "Velocidad",
       y = "Defensa") +
  theme_minimal()

```

Como se puede observar, existe una correlación inversamente proporcional: a mayor defensa, mayor probabilidad de baja velocidad, mientras que un Pokémon sea mas veloz, es más probable que tenga baja defensa. Aunque es importante señalar que, aunque esta correlación es notable, no implica necesariamente causalidad. Existen otros factores que pueden influir tanto en la velocidad como en la defensa de un Pokémon, como su tipo, habilidades, y estadísticas base. Por lo tanto, se deben considerar estas variables adicionales al interpretar los resultados de nuestro análisis.

### 2.3 Altura VS Velocidad

La altura de los Pokémon también resulta un factor digno de estudio en relación con la velocidad.

```{r}
# Filtrar valores irreales
filtered_pokemon <- pokemon_table %>%
  filter(height <= 20, speed <= 200)

# Crear el gráfico ajustado
ggplot(filtered_pokemon, aes(x = height, y = speed)) + 
  geom_jitter(color = "green", alpha = 0.6, width = 0.3, height = 0.1) +  # Añade jitter para dispersar puntos
  labs(title = "Relación entre Altura y Velocidad", x = "Altura (m)", y = "Velocidad") +
  theme_minimal()
```

De este gráfico, se pueden obtener diversas conclusiones:

- Los puntos están bastante dispersos en toda la gráfica sin una tendencia clara; los Pokémon, independientemente de su altura, cubren un rango similar de velocidades.

- La mayoría de los Pokémon tienen velocidades entre 0 y 100, con casos poco comunes que alcanzan los 150.

- La mayor parte de los Pokémon tienen alturas entre 0.1m y 1.0m, aunque algunos llegan a las 2m. Igualmente, no muestran una relación clara con velocidades más altas o bajas.

- Hay algunas densidades más altas alrededor de ciertas alturas (por ejemplo, en torno a 0.4 m y 1.0 m), pero estas no están asociadas con un rango específico de velocidades.

Por todas estas conclusiones, se puede deducir que **la velocidad y la altura no tienen una relación directa** entre si. Además, otros aspectos como el tipo de Pokémon, su peso o sus estadísticas individuales juegan un papel más importante en determinar la velocidad que la altura por sí sola.

# Banco de pruebas

---SOLO PARA PRUEBAS ---
```{r}

```
